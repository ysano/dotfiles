# テスト作成コマンド

テストのベストプラクティスとフレームワークの規約に従って、あらゆるコードベースのための包括的なテストを生成します。

## 実行手順

効果的なテストを作成するために以下の体系的アプローチに従ってください：**$ARGUMENTS**

1. **テストフレームワーク検出**
   - 使用中のテストフレームワークを特定する（Jest、Mocha、PyTest、RSpecなど）
   - 既存のテスト構造と規約をレビューする
   - テスト設定ファイルとセットアップを確認する
   - プロジェクト固有のテストパターンを理解する

2. **テスト対象コードの分析**
   - テストが必要なコードを分析する
   - publicインターフェースと重要なビジネスロジックを特定する
   - 依存関係と外部との相互作用をマッピングする
   - エラー条件とエッジケースを理解する

3. **テスト戦略計画**
   - 必要なテストレベルを決定する:
     - 個別の関数/メソッドのunit test
     - コンポーネント間の相互作用のintegration test
     - ユーザーワークフローのend-to-end test
   - テストカバレッジの目標と優先順位を計画する
   - mockとstubの要件を特定する

4. **Unit Test実装**
   - 個別の関数とメソッドを分離してテストする
   - まずhappy pathシナリオをカバーする
   - エッジケースと境界条件をテストする
   - エラー条件と例外処理をテストする
   - 適切なassertionと期待値を使用する

5. **テスト構造と組織化**
   - AAAパターン（Arrange、Act、Assert）に従う
   - シナリオを説明する記述的なテスト名を使用する
   - test suite/describeブロックで関連テストをグループ化する
   - テストを集中的かつアトミックで保つ

6. **MockingとStubbing**
   - 外部依存とサービスをmockする
   - unit testのために複雑な操作をstubする
   - 信頼性のあるテストのために適切な分離を使用する
   - テストを脆弱にするover-mockingを避ける

7. **データセットアップとクリーンアップ**
   - テストフィクスチャとサンプルデータを作成する
   - テスト環境を清潔にsetupとteardownする
   - 複雑なテストデータにはfactoryやbuilderを使用する
   - テスト同士が干渉しないようにする

8. **Integration Test作成**
   - コンポーネント間の相互作用とデータフローをテストする
   - 様々なシナリオでAPIエンドポイントをテストする
   - データベース操作とトランザクションをテストする
   - 外部サービス統合をテストする

9. **エラーと例外テスト**
   - すべてのエラー条件と例外パスをテストする
   - 適切なエラーメッセージとコードを検証する
   - エラー復旧とフォールバックメカニズムをテストする
   - バリデーションとセキュリティシナリオをテストする

10. **パフォーマンスと負荷テスト**
    - 重要な操作のパフォーマンステストを追加する
    - 異なる負荷条件下でテストする
    - メモリ使用量とリソースクリーンアップを検証する
    - タイムアウトとレート制限シナリオをテストする

11. **セキュリティテスト**
    - 認証と許可をテストする
    - 入力検証とサニタイゼーションをテストする
    - 一般的なセキュリティ脆弱性をテストする
    - アクセス制御と権限をテストする

12. **アクセシビリティテスト（UI向け）**
    - キーボードナビゲーションとスクリーンリーダーをテストする
    - 色のコントラストと視覚的アクセシビリティをテストする
    - ARIA属性とセマンティックマークアップをテストする
    - 支援技術シミュレーションでテストする

13. **クロスプラットフォームテスト**
    - 異なるオペレーティングシステムでテストする
    - 異なるブラウザ（Webアプリ用）でテストする
    - 異なるデバイスサイズと解像度でテストする
    - 異なるバージョンの依存関係でテストする

14. **テストユーティリティとヘルパー**
    - 再利用可能なテストユーティリティとヘルパーを作成する
    - テストデータfactoryとbuilderを構築する
    - カスタムmatcherとassertionを作成する
    - 共通のテストsetupとteardown関数を設定する

15. **スナップショットとビジュアルテスト**
    - UIコンポーネントのスナップショットテストを使用する
    - ビジュアルリグレッションテストを実装する
    - レンダリングされた出力とマークアップをテストする
    - スナップショットを適切にバージョン管理する

16. **非同期テスト**
    - 非同期操作を適切にテストする
    - 適切な非同期テストパターンを使用する
    - Promiseの解決と拒否をテストする
    - コールバックとイベント駆動コードをテストする

17. **テストドキュメンテーション**
    - 複雑なテストシナリオと理由を文書化する
    - 自明でないテストロジックにコメントを追加する
    - チーム参照用のテストドキュメンテーションを作成する
    - テストデータの要件とセットアップを文書化する

18. **テストメンテナンス**
    - コード変更に合わせてテストを最新に保つ
    - コードをリファクタリングする際にテストもリファクタリングする
    - 廃止されたテストを削除し、assertionを更新する
    - 不安定なテストを監視し、修正する

**フレームワーク固有のガイドライン:**

**Jest/JavaScript:**
```javascript
describe('ComponentName', () => {
  beforeEach(() => {
    // Setup
  });

  it('should handle valid input correctly', () => {
    // Arrange
    const input = 'test';
    // Act
    const result = functionToTest(input);
    // Assert
    expect(result).toBe(expectedValue);
  });
});
```

**PyTest/Python:**
```python
class TestClassName:
    def setup_method(self):
        # Setup
        pass

    def test_should_handle_valid_input(self):
        # Arrange
        input_data = "test"
        # Act
        result = function_to_test(input_data)
        # Assert
        assert result == expected_value
```

**RSpec/Ruby:**
```ruby
RSpec.describe ClassName do
  describe '#method_name' do
    it 'handles valid input correctly' do
      # Arrange
      input = 'test'
      # Act
      result = subject.method_name(input)
      # Assert
      expect(result).to eq(expected_value)
    end
  end
end
```

重要なビジネスロジックとユーザー向け機能のテストを最優先し、その後でサポートコードにカバレッジを拡大することを確実に実行してください。