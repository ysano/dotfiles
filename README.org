#+TITLE: Sophisticated Cross-Platform Dotfiles
#+AUTHOR: Yoshiaki Sano
#+DATE: 2025-06-07
#+STARTUP: overview
#+LANGUAGE: ja

* æ¦‚è¦

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€**AIçµ±åˆ**ã€**å¤šè¨€èªå¯¾å¿œ**ã€**ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¸€è²«æ€§**ã‚’é‡è¦–ã—ãŸé«˜åº¦ãªdotfilesæ§‹æˆã§ã™ã€‚
Emacsã‚’ä¸­å¿ƒã¨ã—ãŸçµ±ä¸€çš„ãªã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç’°å¢ƒã‚’ã€Windowsã€macOSã€Linuxå…¨ä½“ã§æä¾›ã—ã¾ã™ã€‚

** ä¸»è¦ç‰¹å¾´

- ğŸ§  *AIé§†å‹•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼*: è¤‡æ•°LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆOllamaã€GitHub Copilotï¼‰
- âŒ¨ï¸  *çµ±ä¸€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰*: å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§Emacsãƒ©ã‚¤ã‚¯ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ğŸŒ *æ—¥è‹±ãƒã‚¤ãƒªãƒ³ã‚¬ãƒ«å¯¾å¿œ*: Mozcã¨æœ€é©åŒ–ã•ã‚ŒãŸå…¥åŠ›ãƒ¡ã‚½ãƒƒãƒ‰
- ğŸ“š *é«˜åº¦ãƒŠãƒ¬ãƒƒã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ*: Org-roamãƒ™ãƒ¼ã‚¹ã®Zettelkasten
- âš¡ *ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–*: é…å»¶èª­ã¿è¾¼ã¿ã¨èµ·å‹•æ™‚é–“æœ€é©åŒ–

* ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

** Emacsè¨­å®š (~2,500è¡Œ)
#+begin_src
.emacs.d/
â”œâ”€â”€ inits/                    # ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­å®š
â”‚   â”œâ”€â”€ init-ai.el           # AI/LLMçµ±åˆ (23è¡Œ)
â”‚   â”œâ”€â”€ init-org-integrated.el # Org-roam + GTD (479è¡Œ)
â”‚   â”œâ”€â”€ init-dev.el          # é–‹ç™ºç’°å¢ƒ (271è¡Œ)
â”‚   â””â”€â”€ ...                  # ãã®ä»–14ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ elisp/                   # ã‚«ã‚¹ã‚¿ãƒ Lisp
â”‚   â””â”€â”€ mozc-cursor-color.el # æ—¥æœ¬èªå…¥åŠ›è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
â””â”€â”€ early-init.el           # èµ·å‹•æœ€é©åŒ–
#+end_src

** ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰çµ±ä¸€
#+begin_src
karabiner/                   # macOS (Karabiner-Elements)
â”œâ”€â”€ assets/complex_modifications/
â”‚   â””â”€â”€ emacs-like.json
keyboard-maestro/            # macOS ãƒã‚¯ãƒ­è‡ªå‹•åŒ–
mayu/                       # Windows ã‚­ãƒ¼ãƒªãƒãƒƒãƒ—
â””â”€â”€ 104onFKB.mayu
#+end_src

** Shellè¨­å®š (Zsh + Zinit)
#+begin_src
.zsh/
â”œâ”€â”€ zinit_setup.zsh         # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†
â”œâ”€â”€ completion.zsh          # è£œå®Œã‚·ã‚¹ãƒ†ãƒ 
â”œâ”€â”€ keybindings.zsh         # ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
â””â”€â”€ ...                     # ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ§‹æˆ
#+end_src

** WSLæœ€é©åŒ–
#+begin_src
wsl/
â”œâ”€â”€ etc_fonts/local.conf    # ãƒ•ã‚©ãƒ³ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
â”œâ”€â”€ mnt_c_opt_mozc/         # æ—¥æœ¬èªå…¥åŠ›ãƒ¡ã‚½ãƒƒãƒ‰
â””â”€â”€ vcxsrv/config.xlaunch   # X11è»¢é€è¨­å®š
#+end_src

* ä¸»è¦æ©Ÿèƒ½

** AIçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

*** LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š
#+begin_src emacs-lisp
;; è¤‡æ•°ã®å°‚é–€åŒ–ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«
(setq ellama-providers
  '(("deepseek-coder-v2" . (make-llm-ollama...))  ; ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
    ("mixtral" . (make-llm-ollama...))             ; æ±ç”¨
    ("mistral" . (make-llm-ollama...))             ; ç¿»è¨³
    ("zephyr" . (make-llm-ollama...))))            ; è»½é‡
#+end_src

*** GitHub Copilotçµ±åˆ
- Company-modeã¨ã®çµ±åˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è£œå®Œ
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

** é«˜åº¦ãƒŠãƒ¬ãƒƒã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ

*** Org-roam Zettelkasten
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é§†å‹•ã®çŸ¥è­˜ã‚°ãƒ©ãƒ•
- æ—¥è‹±ãƒã‚¤ãƒªãƒ³ã‚¬ãƒ«ãƒãƒ¼ãƒˆ
- AIæ”¯æ´ãƒãƒ¼ãƒˆä½œæˆ
- GTDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ

*** ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ (=C-c n= ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹)
- =C-c n f= : ãƒãƒ¼ãƒ‰æ¤œç´¢
- =C-c n i= : ãƒãƒ¼ãƒ‰æŒ¿å…¥
- =C-c n c= : ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼
- =C-c n g= : ã‚°ãƒ©ãƒ•è¡¨ç¤º

** æ—¥æœ¬èªå…¥åŠ›æœ€é©åŒ–

*** Mozcçµ±åˆ
- ã‚«ãƒ¼ã‚½ãƒ«è‰²ã«ã‚ˆã‚‹çŠ¶æ…‹è¡¨ç¤º
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- å…¥åŠ›ãƒ¡ã‚½ãƒƒãƒ‰åˆ‡ã‚Šæ›¿ãˆã®è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

*** WSLæ—¥æœ¬èªç’°å¢ƒ
- ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–
- å…¥åŠ›ãƒ¡ã‚½ãƒƒãƒ‰çµ±åˆ
- X11ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ

** é–‹ç™ºç’°å¢ƒ

*** è¨€èªåˆ¥è¨­å®š
- *PHP*: PSR-2æº–æ‹ ã€PHPCSã¨ã®çµ±åˆ
- *Go*: gofmtè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- *Python*: yapfã€flake8çµ±åˆ
- *Ruby*: Rubocopçµ±åˆ
- *JavaScript/TypeScript*: ESLintã€Prettier

*** é«˜åº¦ãªæ©Ÿèƒ½
- Magit (Gitçµ±åˆ)
- Flycheck (æ§‹æ–‡ãƒã‚§ãƒƒã‚¯)
- Company-mode (è£œå®Œ)
- Projectile (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†)

* ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

** å‰ææ¡ä»¶
- Emacs 28+ (native-compã‚µãƒãƒ¼ãƒˆæ¨å¥¨)
- Zsh 5.8+
- Git 2.25+
- Node.js (Copilotç”¨)

** ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

*** 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
#+begin_src bash
git clone https://github.com/username/dotfiles.git ~/.dotfiles
cd ~/.dotfiles
#+end_src

*** 2. ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ä½œæˆ
#+begin_src bash
chmod +x link.sh
./link.sh
#+end_src

*** 3. OSå›ºæœ‰è¨­å®š

**** macOS
#+begin_src bash
# Karabiner-Elementsè¨­å®š
cp karabiner/karabiner.json ~/.config/karabiner/

# Homebrew ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
brew install emacs zsh zinit
#+end_src

**** Linux/WSL
#+begin_src bash
# ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
sudo cp wsl/etc_fonts/local.conf /etc/fonts/local.conf

# Mozcè¨­å®š (WSL)
sudo cp wsl/mnt_c_opt_mozc/* /mnt/c/opt/mozc/
#+end_src

**** Windows
- Mayuè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©ç”¨
- Keyboard Maestroãƒã‚¯ãƒ­ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

** AIè¨­å®š

*** Ollama setup
#+begin_src bash
# Ollamaã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://ollama.ai/install.sh | sh

# ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
ollama pull llama3.1:8b-instruct-q4_K_S
ollama pull deepseek-coder-v2:16b
ollama pull mixtral:8x7b
#+end_src

*** GitHub Copilot
#+begin_src bash
# Node.jsä¾å­˜é–¢ä¿‚
npm install -g copilot-node-server
#+end_src

* ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

** ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®š
- =~/.zshrc.local= : ãƒ­ãƒ¼ã‚«ãƒ«Zshè¨­å®š
- =~/.emacs.d/inits/init-local.el= : ãƒ­ãƒ¼ã‚«ãƒ«Emacsè¨­å®š
- =CLAUDE.md= : AIæ”¯æ´ã‚³ãƒãƒ³ãƒ‰å±¥æ­´

** è¨­å®šã®æ‹¡å¼µ
å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ç‹¬ç«‹ã—ã¦ãŠã‚Šã€å¿…è¦ã«å¿œã˜ã¦å€‹åˆ¥ã«ç„¡åŠ¹åŒ–ãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚

** OSå›ºæœ‰ã®èª¿æ•´
=.zprofile= ã®OSæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã‚Šã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®è¨­å®šãŒè‡ªå‹•é©ç”¨ã•ã‚Œã¾ã™ã€‚

* ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

** ã‚ˆãã‚ã‚‹å•é¡Œ

*** Zshèµ·å‹•æ™‚ã‚¨ãƒ©ãƒ¼
#+begin_src bash
# Dockerè£œå®Œã‚¨ãƒ©ãƒ¼
sudo rm /usr/share/zsh/vendor-completions/_docker

# Zinitã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf ~/.cache/zinit
#+end_src

*** Emacs ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¨ãƒ©ãƒ¼
#+begin_src emacs-lisp
;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
M-x package-refresh-contents
M-x package-reinstall RET [package-name]
#+end_src

*** WSL X11å•é¡Œ
#+begin_src bash
# DISPLAYå¤‰æ•°ç¢ºèª
echo $DISPLAY
# VcXsrvå†èµ·å‹•ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™
#+end_src

** ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

*** Emacsèµ·å‹•æ™‚é–“
#+begin_src emacs-lisp
;; èµ·å‹•æ™‚é–“æ¸¬å®š
M-x emacs-init-time

;; çµ±è¨ˆæƒ…å ±
M-x use-package-report
#+end_src

*** Zshèµ·å‹•æ™‚é–“
#+begin_src bash
# ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°
time zsh -i -c exit

# Zinitçµ±è¨ˆ
zinit times
#+end_src

* è²¢çŒ®

ã“ã®dotfilesè¨­å®šã¸ã®æ”¹å–„ææ¡ˆã‚„ãƒã‚°å ±å‘Šã¯æ­“è¿ã—ã¾ã™ã€‚
ç‰¹ã«ä»¥ä¸‹ã®åˆ†é‡ã§ã®è²¢çŒ®ã‚’æ±‚ã‚ã¦ã„ã¾ã™ï¼š

- AIçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ”¹å–„
- æ–°ã—ã„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ”¹å–„

* ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯å€‹äººä½¿ç”¨å‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ãŒã€
å‚è€ƒã«ã—ã¦ã„ãŸã ãã“ã¨ã¯è‡ªç”±ã§ã™ã€‚

* ãƒªãƒ³ã‚¯

- [[https://www.gnu.org/software/emacs/][GNU Emacs]]
- [[https://github.com/zdharma-continuum/zinit][Zinit]]
- [[https://github.com/org-roam/org-roam][Org-roam]]
- [[https://ollama.ai/][Ollama]]
- [[https://github.com/features/copilot][GitHub Copilot]]

---
/æœ€çµ‚æ›´æ–°: 2025-06-07/