# tmux-claude-voice システム設定
# 自動生成された設定ファイル

# === Claude Voice 基本設定 ===
set -g @claude_voice_enabled "true"
set -g @claude_voice_interval "5"
set -g @claude_voice_window_pattern "Claude|claude|CLAUDE"

# === 音声エンジン設定 ===
set -g @claude_voice_sound_enabled "true"
set -g @claude_voice_sound_start "Submarine"
set -g @claude_voice_sound_complete "Funk" 
set -g @claude_voice_sound_waiting "Basso"
set -g @claude_voice_sound_error "Basso"

# === 音声合成設定 ===
set -g @claude_voice_speech_rate "200"
set -g @claude_voice_volume_macos "0.8"
set -g @claude_voice_volume_wsl "80"
set -g @claude_voice_macos_voice "Kyoko"
set -g @claude_voice_wsl_voice "Haruka"
set -g @claude_voice_voice_quality "enhanced"

# === デシベルパンニング設定 ===
set -g @claude_voice_panning_enabled "true"
set -g @claude_voice_pan_range "1.0"
set -g @claude_voice_pan_identification "true"
set -g @claude_voice_pan_dynamic "true"
set -g @claude_voice_pan_margin "0.1"
set -g @claude_voice_pan_min_distance "0.15"
set -g @claude_voice_pan_law "equal_power"

# === Ollama連携設定 ===
set -g @claude_voice_ollama_host "localhost"
set -g @claude_voice_ollama_port "11434"
set -g @claude_voice_ollama_timeout "10"
set -g @claude_voice_summary_enabled "true"
set -g @claude_voice_summary_length "30"
set -g @claude_voice_summary_lines "20"
set -g @claude_voice_summary_temperature "0.3"

# === キーバインド設定 ===
# Prefix + v + ... でClaude Voice機能にアクセス
bind-key v switch-client -T claude_voice_table

# Claude Voice統合テスト
bind-key -T claude_voice_table t run-shell "~/.tmux/claude/integration_test.sh"

# Claude Voice自動要約 ON/OFF
bind-key -T claude_voice_table v run-shell "tmux set-option -g @claude_voice_summary_enabled $(tmux show-option -gqv @claude_voice_summary_enabled | grep -q true && echo false || echo true); tmux display-message 'Claude Voice要約: $(tmux show-option -gqv @claude_voice_summary_enabled)'"

# ステータス別音声テスト
bind-key -T claude_voice_table 1 run-shell "~/.tmux/claude/sound_utils.sh play complete"
bind-key -T claude_voice_table 2 run-shell "~/.tmux/claude/sound_utils.sh play waiting"
bind-key -T claude_voice_table 3 run-shell "~/.tmux/claude/sound_utils.sh play start"

# 音声合成テスト
bind-key -T claude_voice_table s run-shell "~/.tmux/claude/sound_utils.sh speak 'Claude Voiceシステムのテストです'"

# パンニング機能 ON/OFF
bind-key -T claude_voice_table p run-shell "tmux set-option -g @claude_voice_panning_enabled $(tmux show-option -gqv @claude_voice_panning_enabled | grep -q true && echo false || echo true); tmux display-message 'パンニング機能: $(tmux show-option -gqv @claude_voice_panning_enabled)'"

# === ポーリング監視制御（将来拡張用） ===
# ポーリング監視は自動実行のため手動制御は不要
# 将来的にON/OFF制御が必要な場合は以下を有効化:
# bind-key -T claude_voice_table S run-shell "tmux set-option -g @claude_voice_enabled true; tmux display-message 'Claude Voice監視: ON'"
# bind-key -T claude_voice_table Q run-shell "tmux set-option -g @claude_voice_enabled false; tmux display-message 'Claude Voice監視: OFF'"

# === ポーリング自動監視設定 ===
# tmuxステータス更新間隔を5秒に設定
set -g status-interval 5

# ポーリング監視を自動実行（status-rightに統合）
# 注意: 既存のstatus-right設定がある場合は手動で統合してください
set -g status-right '#(~/.tmux/claude/polling_monitor.sh)#[default] %H:%M '


# === デバッグモード設定 ===
if-shell '[ "${TMUX_CLAUDE_VOICE_DEBUG:-false}" = "true" ]' \
  'display-message "Claude Voice システム設定読み込み完了 (デバッグモード)"'