# Modern tmux Status Configuration
# リファクタリング版: 統合スクリプト使用

# === ステータスバー基本設定 ===
set -g status-left-length 40
set -g status-right-length 80
set -g status-interval 5

# === 動的ステータス左 ===
# セッション名とホスト名（簡潔化）
set -g status-left "#[fg=colour235,bg=colour117,bold] #S #[fg=colour117,bg=colour238,nobold]#[fg=colour250,bg=colour238] #H #[fg=colour238,bg=colour235,nobold]"

# === 動的ステータス右（OS対応） ===
# デフォルト（OS固有設定で上書き可能）
set -g status-right "#[fg=colour238,bg=colour235]#[fg=colour250,bg=colour238] #(uname) #[fg=colour117,bg=colour238]#[fg=colour235,bg=colour117,bold] %Y-%m-%d %H:%M "

# === ウィンドウステータス（シンプル統合） ===
# 通常ウィンドウ
set -g window-status-format "#[fg=colour250,bg=colour235] #I#[fg=colour238]:#[fg=colour250]#{=8:window_name}#(~/.tmux/scripts/claude-status-unified.sh)#F "

# アクティブウィンドウ
set -g window-status-current-format "#[fg=colour235,bg=colour117]#[fg=colour235,bg=colour117,bold] #I#[nobold]:#[bold]#{=8:window_name}#(~/.tmux/scripts/claude-status-unified.sh)#F #[fg=colour117,bg=colour235,nobold]"

# === 環境変数による動的設定 ===
# Claude Voice機能の条件付き有効化
if-shell '[ "${CLAUDE_VOICE_ENABLED:-true}" = "true" ]' \
  "set -g window-status-current-format \"#[fg=colour235,bg=colour117]#[fg=colour235,bg=colour117,bold] #I#[nobold]:#[bold]#{=8:window_name}#(~/.tmux/scripts/claude-status-unified.sh)#F #[fg=colour117,bg=colour235,nobold]\""

# === パフォーマンス最適化（環境変数対応） ===
# 高頻度更新モード
if-shell '[ "${TMUX_PERFORMANCE_MODE:-auto}" = "high_refresh" ]' \
  "set -g status-interval 2"

# 低頻度更新モード（バッテリー節約）
if-shell '[ "${TMUX_PERFORMANCE_MODE:-auto}" = "battery_saver" ]' \
  "set -g status-interval 10"