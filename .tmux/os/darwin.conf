# macOS-specific tmux settings

# macOS status right format with memory and CPU usage (modern dark theme, no CPU bars)
# Requires: brew install tmux-mem-cpu-load
# Options: --graph-lines 0 (no CPU bars), --mem-mode 2 (usage percent)
if-shell 'command -v tmux-mem-cpu-load' \
  'set -g status-right "#[fg=colour238,bg=colour235]#[fg=colour250,bg=colour238] #(tmux-mem-cpu-load --colors --interval 2 --graph-lines 0 --mem-mode 2) #[fg=colour117,bg=colour238]#[fg=colour235,bg=colour117,bold] %m/%d(%a) %H:%M "' \
  'set -g status-right "#[fg=colour238,bg=colour235]#[fg=colour226,bg=colour238,bold] Load:#(sysctl -n vm.loadavg | cut -d\  -f2) #[fg=colour117,bg=colour238]#[fg=colour235,bg=colour117,bold] %m/%d(%a) %H:%M "'

set -g status-right-length 100

# macOS-specific optimization settings
# Improve clipboard integration
set -g set-clipboard on
set -g set-clipboard external

# Load common settings
source-file ~/.tmux/shared/claude-voice-common.conf
source-file ~/.tmux/shared/performance-common.conf
source-file ~/.tmux/shared/window-status-common.conf

# macOS-specific performance settings
set -g history-limit 10000

# macOS-specific key bindings
# Cmd+K to clear history (when using terminal that supports it)
# bind-key -n C-k send-keys "clear" \; send-keys "Enter"  # Disabled: conflicts with Emacs kill-line
unbind-key -T root C-k  # Ensure C-k is not bound to clear command

# macOS-specific notification settings
set-environment -g CLAUDE_RESPECT_DND "true"

# macOS-specific key binding (DND toggle)
bind-key C-d run-shell 'if [ "$CLAUDE_RESPECT_DND" = "true" ]; then tmux set-environment -g CLAUDE_RESPECT_DND "false" && tmux display-message "DND respect disabled"; else tmux set-environment -g CLAUDE_RESPECT_DND "true" && tmux display-message "DND respect enabled"; fi'