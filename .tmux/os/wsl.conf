# WSL-specific tmux settings
# Windows Subsystem for Linux environment optimizations

# WSLç’°å¢ƒã§ã®ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰é€£æº
if-shell 'command -v clip.exe' 'bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "clip.exe"'
if-shell 'command -v clip.exe' 'bind-key -T copy-mode C-w send-keys -X copy-pipe-and-cancel "clip.exe"'

# Load common settings
source-file ~/.tmux/shared/claude-voice-common.conf
source-file ~/.tmux/shared/performance-common.conf  
source-file ~/.tmux/shared/window-status-common.conf

# WSLå›ºæœ‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼è¨­å®š (å……å®Ÿç‰ˆ)
# WSLç‰ˆã¨ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ã€CPUä½¿ç”¨çŽ‡ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ã‚’å«ã‚€
set -g status-right "#[fg=colour238,bg=colour235]#[fg=colour250,bg=colour238] ðŸ’» #(lsb_release -rs 2>/dev/null || echo 'WSL') #[fg=yellow,bold]âš¡ #(cat /proc/loadavg | cut -d ' ' -f 1-3)#[default] #[fg=cyan]ðŸ§  #(free | awk 'NR==2{printf \"%.0f%%\", $3*100/$2}')#[default] #[fg=green]ðŸ’¾ #(df -h / | awk 'NR==2{print $5}')#[default] #[fg=colour117,bg=colour238]#[fg=colour235,bg=colour117,bold] %m/%d(%a) %H:%M "
set -g status-right-length 120

# WSLç’°å¢ƒã§ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«è¨­å®š
set-option -g default-terminal "tmux-256color"
set-option -sa terminal-overrides ",xterm*:Tc"
set-option -sa terminal-overrides ",WSL*:Tc"

# WSL-specific terminal settings

# WSLç’°å¢ƒã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–
set -g @continuum-save-interval '15'  # 15åˆ†é–“éš”ã§è‡ªå‹•ä¿å­˜

# WSL-specific environment variables
set-environment -g WSL_INTEGRATION 'enabled'
set-environment -g WINDOWS_HOST_PATH '/mnt/c'

# WSL-specific utility keybindings
# Open Windows Explorer at current directory
bind-key C-e run-shell 'explorer.exe .'

# Copy current path to Windows clipboard
bind-key C-p run-shell 'pwd | tr -d "\\n" | clip.exe && tmux display-message "Path copied to Windows clipboard"'

# WSL-specific performance optimizations
set -g history-limit 50000     # Larger buffer for development work
set -g display-time 3000       # Longer display time for WSL
set -g display-panes-time 3000

# WSL clipboard integration improvements
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "clip.exe"
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "clip.exe"

# WSL-specific development helpers
# Quick access to Windows user directory
bind-key C-w run-shell 'cd /mnt/c/Users/$USER 2>/dev/null || cd /mnt/c/Users/$(whoami) 2>/dev/null || tmux display-message "Windows user dir not found"'

# Git status in current directory
bind-key C-g run-shell 'cd #{pane_current_path} && git status --porcelain | head -10 | tmux display-message "$(cat)"'