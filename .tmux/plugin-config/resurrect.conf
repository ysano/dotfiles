# =================================================================
# tmux resurrect + continuum ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š
# =================================================================

# === TPMï¼ˆTmux Plugin Managerï¼‰ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å®šç¾© ===
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# === tmux-resurrect åŸºæœ¬è¨­å®š ===

# å¾©å…ƒå¯¾è±¡ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ‹¡å¼µï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¿½åŠ ï¼‰
set -g @resurrect-processes 'vi vim nvim emacs man less more tail top htop python python3 node npm ssh psql mysql sqlite3 redis-cli mongosh'

# ãƒšã‚¤ãƒ³å†…å®¹ã®å¾©å…ƒï¼ˆå®Ÿé¨“çš„æ©Ÿèƒ½ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFFï¼‰
# æœ‰åŠ¹åŒ–ã™ã‚‹ã¨å„ãƒšã‚¤ãƒ³ã®å†…å®¹ã‚‚å¾©å…ƒã•ã‚Œã¾ã™ãŒã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
# set -g @resurrect-capture-pane-contents 'on'

# ä¿å­˜æˆ¦ç•¥ï¼ˆpaneå†…å®¹ã‚’å«ã‚ã‚‹å ´åˆã®ã¿æœ‰åŠ¹ï¼‰
# set -g @resurrect-strategy-vim 'session'
# set -g @resurrect-strategy-nvim 'session'

# ä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ~/.local/share/tmux-resurrect/ï¼‰
# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ:
# set -g @resurrect-dir '~/.tmux/resurrect'

# === tmux-continuum è‡ªå‹•åŒ–è¨­å®š ===

# è‡ªå‹•ä¿å­˜é–“éš”ï¼ˆåˆ†å˜ä½ï¼‰
set -g @continuum-save-interval '15'

# tmuxèµ·å‹•æ™‚ã«å‰å›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•å¾©å…ƒ
set -g @continuum-restore 'on'

# ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã«tmuxã‚’è‡ªå‹•èµ·å‹•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFFã€å¿…è¦ã«å¿œã˜ã¦æœ‰åŠ¹åŒ–ï¼‰
# macOS: launchdã€Linux: systemd ã§ã®è‡ªå‹•èµ·å‹•
# set -g @continuum-boot 'on'
# set -g @continuum-boot-options 'fullscreen'

# === status-rightçµ±åˆè¨­å®š ===
# Claude Voiceç›£è¦– + continuumä¿å­˜ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ + CPU/ãƒ¡ãƒ¢ãƒª + æ™‚åˆ»

# æœ€å¾Œã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ãŸã‚ã€darwin.confï¼ˆL7-8ï¼‰ã¨claude.confï¼ˆL79ï¼‰ã‚’ä¸Šæ›¸ã
set -g status-right-length 150

# macOS: tmux-mem-cpu-loadçµ±åˆç‰ˆ
if-shell 'test "$(uname)" = "Darwin" && command -v tmux-mem-cpu-load' \
  'set -g status-right "#[fg=green,bg=black]#(tmux-mem-cpu-load --colors --interval 2)#[default] #(~/.tmux/claude/polling_monitor.sh)#{continuum_status} #[fg=cyan,bold]%Y-%m-%d %H:%M#[default] "' \
  'set -g status-right "#[fg=yellow,bold]#([ "$(uname)" = "Darwin" ] && sysctl -n vm.loadavg | tr -d {} || cat /proc/loadavg | awk "{print \$1,\$2,\$3}")#[default] #(~/.tmux/claude/polling_monitor.sh)#{continuum_status} #[fg=cyan,bold]%Y-%m-%d %H:%M#[default] "'

# Linux/FreeBSD: ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ‰ç‰ˆ
if-shell 'test "$(uname)" = "Linux" || test "$(uname)" = "FreeBSD"' \
  'set -g status-right "#[fg=yellow,bold]#(cat /proc/loadavg 2>/dev/null || sysctl -n vm.loadavg | tr -d {})#[default] #(~/.tmux/claude/polling_monitor.sh)#{continuum_status} #[fg=cyan,bold]%Y-%m-%d %H:%M#[default] "'

# continuum statusã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
set -g @continuum-status-icon-ok "ğŸ’¾"
set -g @continuum-status-icon-saving "â³"
set -g @continuum-status-icon-disabled "ğŸš«"

# === ãƒ‡ãƒãƒƒã‚°æƒ…å ± ===
if-shell '[ "${TMUX_DEBUG_MODE:-false}" = "true" ]' \
  'display-message "tmux resurrect + continuum ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®šèª­ã¿è¾¼ã¿å®Œäº†"'
