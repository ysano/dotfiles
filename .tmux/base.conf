# Base tmux settings

# Use zsh as default shell
set -g default-command zsh

# Use C-z instead of C-b as the prefix
unbind C-b
set -g prefix C-z
bind C-z send-prefix
bind z send-prefix

# Start window/pane indexing at 1 instead of 0
set -g base-index 1
set -g pane-base-index 1

# Enable window titles
set -g set-titles on

# Terminal settings
# tmux 内部では tmux-256color を使用（xterm-256color は不正 — tmux wiki FAQ参照）
set-option -g default-terminal "tmux-256color"
set -as terminal-overrides ",*:U8=0"

# Display settings
set -g display-time 2000
set -g display-panes-time 800

# Automatic window renaming
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{=|-22|..;b:pane_current_path}'

# Renumber windows when one is closed (prevent gaps)
set -g renumber-windows on

# Scrollback buffer
set -g history-limit 10000

# Default status interval (overridden by OS-specific conf)
set -g status-interval 5

# Mouse support
set -g mouse on

# Activity monitoring (highlight in status bar, no message popup)
set -g monitor-activity on
set -g monitor-bell on
set -g visual-activity off

# SSH re-attach: refresh stale environment variables
set -g update-environment "SSH_AUTH_SOCK SSH_CONNECTION DISPLAY SSH_TTY"