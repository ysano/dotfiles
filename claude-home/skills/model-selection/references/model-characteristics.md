## モデル別特性と最適配置

Claude モデルファミリー（Haiku / Sonnet / Opus）の特性比較と、タスクに応じた最適配置戦略。

### モデル特性比較表

| 特性 | Haiku (3.5/4.5) | Sonnet (3.5/3.7/4.5) | Opus (4.5/4.6) |
|------|:---:|:---:|:---:|
| **入力単価** | $0.80-1.00/百万tok | $3.00/百万tok | $15.00/百万tok |
| **出力単価** | $4.00-5.00/百万tok | $15.00/百万tok | $75.00/百万tok |
| **SWE-bench** | 低〜中 | 49%〜62% | 80%+ |
| **推論速度** | 最速 | 中程度 | 低速 |
| **コンテキスト** | 200k tok | 200k tok | 200k tok |
| **Thinking Mode** | - | 3.7+ 対応 | 対応 |
| **AI-DLC 役割** | Operations | Construction 主力 | Inception / レスキュー |

### 各モデルの詳細

#### Haiku: 高頻度・低遅延の「ライブラリアン」

**最適ユースケース**:
- **Read-only 探索**: grep/ls によるコードベース検索、ファイル読み出し
- **定型タスク**: リンターエラー修正、フォーマット整形、単純な単体テスト実行
- **CI/CD**: コミットメッセージ生成、変更ログ要約

**注意点**:
- 複雑なツールチェーン（Tool Use）で呼び出し順序や引数スキーマを誤る「幻覚」リスク
- 失敗率が閾値を超えると、安価なメリットが再試行コストで相殺される
- **厳密なタスク範囲の限定**が必須

#### Sonnet: バランスの取れた「シニアエンジニア」

**最適ユースケース**:
- **機能実装**: クラス設計、既存コード修正、Feature Implementation
- **デバッグ**: エラーログ解析と修正案提示
- **自律ループ**: コード生成 → テスト実行 → 修正の Reflexion Loop

**Thinking Mode の経済性**:
- 一見トークン消費増だが、一発正解率（Pass@1）を向上
- 外部ループ（実装→テスト失敗→再考）より内部ループ（思考→自己修正→実装）が効率的
- コンテキスト肥大化を防ぎ、複雑なタスクほど効果大

#### Opus: 最高精度の「プリンシパルアーキテクト」

**最適ユースケース**:
- **Inception / Planning**: 要件定義→仕様書作成、アーキテクチャ設計、タスク分解
- **Root Cause Analysis**: Sonnet が解決できなかった難解バグの解析
- **Security Audit**: 潜在的脆弱性の発見、セキュリティ要件検証

**配置戦略**:
- 「失敗が許されない」「失敗コストが無限大」の場面に限定
- 日常コーディングへの投入は経済的に正当化困難
- Inception フェーズと Construction の「レスキュー」に集中配置

### タスク複雑性 × モデル選択マトリクス（完全版）

| タスクカテゴリ | 複雑性 (NLCC) | 推奨モデル | 選択の論理的根拠 |
|:---|:---:|:---|:---|
| **コードベース探索** | 低 | Haiku | 幻覚リスク低、速度・コスト効率最優先 |
| **単体テスト生成** | 中 | Sonnet | ロジック理解が必要だが影響範囲が局所的 |
| **バグ修正** | 高 | Sonnet (Thinking) | 実行パス追跡が必要。思考モードで試行削減 |
| **リファクタリング** | 中〜高 | Sonnet | 広範な変更だが既存パターンの踏襲が可能 |
| **アーキテクチャ設計** | 超高 | Opus | システム全体への影響。初期投資で手戻り回避 |
| **セキュリティレビュー** | 高 | Opus / Sonnet | False Negative が許容不可 |
| **CI/CD 自動化** | 低 | Haiku | 定型的スクリプト、自律判断不要 |
| **ドキュメント生成** | 低〜中 | Haiku / Sonnet | 構造化された変換タスク |
| **要件定義 → 仕様書** | 超高 | Opus | 曖昧な意図の構造化。最高精度が必要 |

### AI-DLC 3フェーズ × モデルのマッピング

| フェーズ | 主役モデル | 補助モデル | 主要タスク |
|---------|-----------|-----------|-----------|
| **Inception** | Opus | Sonnet | 要件定義、仕様書作成、タスク分解 |
| **Construction** | Sonnet (Thinking) | Haiku | 実装、テスト、デバッグ、Reflexion Loop |
| **Operations** | Haiku | Sonnet | CI/CD、監視、ドキュメント更新、軽微保守 |

> フェーズごとの儀式（Mob Elaboration, Mob Construction 等）の詳細は `ai-dlc-ceremonies` Skill を参照。

### モデル選択のアンチパターン

| パターン | 問題 |
|---------|------|
| 全タスクに Opus | コスト爆発。日常コーディングには過剰投資 |
| 全タスクに Haiku | 品質崩壊。複雑タスクの手戻りでかえって高コスト |
| 性能だけで選択 | コストを無視。TCO（手戻り込み総コスト）で評価すべき |
| コストだけで選択 | 人間介入コストを見落とし。P_s 低下のリスクが指数的 |
| 一度設定して放置 | モデル価格改定・新モデル登場に追従できない |
