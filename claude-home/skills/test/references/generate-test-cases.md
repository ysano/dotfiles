# Generate Comprehensive Test Cases

コード分析に基づき包括的なテストケースを自動生成する手順。

## 1. ターゲット分析とスコープ定義

- ターゲットファイルまたは関数を解析 (引数: `$ARGUMENTS`)
- ターゲット未指定の場合、現在のディレクトリを分析しプロンプト
- ターゲットコード構造、依存関係、複雑度を調査
- 関数シグネチャ、パラメータ、戻り値型、副作用を特定
- テストスコープを決定 (ユニット, 統合, または両方)

## 2. コード構造分析

- 関数ロジック、分岐、制御フローを分析
- 入力検証、エラーハンドリング、エッジケースを特定
- 外部依存、API 呼び出し、データベース連携を調査
- データ変換とビジネスロジックを確認
- 非同期操作とエラーシナリオを特定

## 3. テストケース生成戦略

- 通常操作フローのポジティブテストケースを生成
- エラー条件と無効入力のネガティブテストケースを作成
- 境界条件と制限のエッジケースを生成
- 外部依存の統合テストケースを作成
- 複雑な操作のパフォーマンステストケースを生成

## 4. ユニットテスト実装

- プロジェクトの命名規則に従いテストファイルを作成
- テストフレームワークのインポートと設定をセットアップ
- 機能ごとに整理されたテストスイートを生成
- 記述的な名前で包括的なテストケースを作成
- 各テストに適切なセットアップ・クリーンアップを実装

## 5. モックとスタブの生成

- モックが必要な外部依存を特定
- API とサービスのモック実装を生成
- データベースとファイルシステム操作のスタブデータを作成
- 関数呼び出し監視のスパイ関数をセットアップ
- モックの戻り値とエラーシナリオを設定

## 6. データドリブンテスト生成

- 様々な入力シナリオのテストデータセットを作成
- 複数入力組み合わせのパラメータ化テストを生成
- 複雑なデータ構造のフィクスチャを作成
- 一貫したデータ生成のテストデータファクトリーをセットアップ
- 包括的カバレッジのプロパティベーステストケースを生成

## 7. 統合テストシナリオ

- コンポーネント連携のテストを生成
- E2E ワークフローテストケースを作成
- API 統合テストシナリオを生成
- 実データでのデータベース統合テストを作成
- クロスモジュール統合テストケースを生成

## 8. エラーハンドリングと例外テスト

- すべてのエラー条件と例外のテストを生成
- タイムアウトとネットワーク障害シナリオのテストを作成
- 無効入力検証のテストを生成
- リソース枯渇と制限のテストを作成
- 並行アクセスと競合状態のテストを生成

## 9. テスト品質とカバレッジ

- ターゲット関数の包括的コードカバレッジを確保
- すべてのコード分岐とパスのテストを生成
- 成功と失敗両方のシナリオのテストを作成
- テストアサーションが意味的かつ具体的であることを検証
- テストが分離され独立していることを確保

## 10. チェックリスト

- [ ] ターゲットコードを分析
- [ ] ポジティブ・ネガティブ・エッジケースをカバー
- [ ] モックとスタブを適切に生成
- [ ] データドリブンテストを実装
- [ ] 統合テストシナリオを作成
- [ ] エラーハンドリングをテスト
- [ ] コードカバレッジを検証
- [ ] 生成テストが実行成功することを確認

関連リファレンス: `write-tests.md`, `test-coverage.md`, `property-based-testing.md`
